<div class="w-[80vw] max-w-[1440px] mx-auto p-6 space-y-10">
  <a routerLink="/"
     class="text-white font-bold text-lg hover:underline transition cursor-pointer">
    Zurück
  </a>

  <!-- URL Input -->
  <section class="bg-gray-800 p-6 rounded-xl shadow-lg space-y-4">
    <h2 class="text-2xl text-white font-semibold">Stellenangebot über URL</h2>
    <input type="text"
           placeholder="https://example.com/job123"
           [formControl]="jobUrlControl"
           class="w-full p-3 rounded-lg bg-gray-700 text-white placeholder-gray-400 outline-none"/>
    <button
      class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg transition disabled:opacity-50"
      [disabled]="jobUrlControl.invalid"
      (click)="analyzeUrl()">
      Analyse via URL
    </button>

  </section>

  <!-- Manuelle Eingabe -->
  <section class="bg-gray-800 p-6 rounded-xl shadow-lg space-y-6">
    <h2 class="text-2xl text-white font-semibold">Manuelle Eingabe von Stellenangeboten</h2>
    <textarea placeholder="Kopieren Sie hier das gesamte Stellenangebot hinein ..."
              [formControl]="jobTextControl"
              class="w-full p-3 rounded-lg bg-gray-700 text-white h-40 resize-none"></textarea>
    <button
      class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg transition disabled:opacity-50"
      [disabled]="jobTextControl.invalid"
      (click)="analyzeText()"
    >
      Stellenangebot analysieren
    </button>

  </section>

  <!-- Analyse Ergebnis -->
  @if (analysisResult$.getValue()) {
    @let analysis = analysisResult$.getValue()!!;
    <section class="bg-gray-800 p-6 rounded-xl shadow-lg space-y-4">
      <h2 class="text-2xl text-white font-semibold">Analyse Ergebnis</h2>

      <p class="text-white"><strong>Titel:</strong> {{ analysis.title }}</p>
      <p class="text-white"><strong>Firma:</strong> {{ analysis.company }}</p>
      <p class="text-white"><strong>Zusammenfassung:</strong> {{ analysis.summary }}</p>
      <p class="text-white"><strong>Skills:</strong> {{ analysis.techStack.join(', ') }}</p>

      <p class="text-white"><strong>Benefits:</strong></p>
      <ul class="text-white list-disc list-inside">
        <li><strong>Aufgaben:</strong> {{ analysis.tasks }}</li>
        <li><strong>Arbeitsmodell:</strong> {{ analysis.workingModel }}</li>
        <li><strong>Erfahrung:</strong> {{ analysis.experience }}</li>
        <li><strong>Benefits:</strong> {{ analysis.benefits }}</li>
        <li><strong>Kultur:</strong> {{ analysis.culture }}</li>
      </ul>

      <p class="text-white"><strong>Gehalt:</strong> {{ analysis.salaryRange }}</p>
      <p class="text-white"><strong>Match Score:</strong> {{ analysis.matchScore }}%</p>
      <p class="text-white"><strong>Match Begründung:</strong> {{ analysis.matchReasoning }}</p>

      <div class="flex gap-3 mt-4">
        <button class="bg-red-600 hover:bg-red-700 text-white font-semibold px-4 py-2 rounded-lg transition"
                (click)="discardAnalysis()">Verwerfen
        </button>
        <button class="bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg transition"
                (click)="saveAnalysis()">Speichern
        </button>
      </div>
    </section>
  }
</div>
